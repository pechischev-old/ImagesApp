(function(){var e=this;function f(a,b,c){return a.call.apply(a.bind,arguments)}function g(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function h(a,b,c){h=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:g;return h.apply(null,arguments)};var k=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function m(a,b){return a<b?-1:a>b?1:0}function n(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function p(a){var b="\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,q){return b+q.toUpperCase()})};function r(a,b){this.x=void 0!==a?a:0;this.y=void 0!==b?b:0}r.prototype.clone=function(){return new r(this.x,this.y)};r.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};r.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};r.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};function v(a,b){this.width=a;this.height=b}v.prototype.clone=function(){return new v(this.width,this.height)};v.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};v.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};v.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function w(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}w.prototype.clone=function(){return new w(this.left,this.top,this.width,this.height)};w.prototype.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};w.prototype.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
w.prototype.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function x(){var a=new w(200,200,250,250);this.b=new v(a.width,a.height);this.a=new r(a.left,a.top)};function aa(){this.a=[]}function y(a){var b=new x;a.a.push(b);return new w(b.a.x,b.a.y,b.b.width,b.b.height)};var z;a:{var A=e.navigator;if(A){var B=A.userAgent;if(B){z=B;break a}}z=""};var C=-1!=z.indexOf("Opera")||-1!=z.indexOf("OPR"),D=-1!=z.indexOf("Trident")||-1!=z.indexOf("MSIE"),ba=-1!=z.indexOf("Edge"),E=-1!=z.indexOf("Gecko")&&!(-1!=z.toLowerCase().indexOf("webkit")&&-1==z.indexOf("Edge"))&&!(-1!=z.indexOf("Trident")||-1!=z.indexOf("MSIE"))&&-1==z.indexOf("Edge"),F=-1!=z.toLowerCase().indexOf("webkit")&&-1==z.indexOf("Edge");function G(){var a=e.document;return a?a.documentMode:void 0}var H;
a:{var I="",J=function(){var a=z;if(E)return/rv\:([^\);]+)(\)|;)/.exec(a);if(ba)return/Edge\/([\d\.]+)/.exec(a);if(D)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(F)return/WebKit\/(\S+)/.exec(a);if(C)return/(?:Version)[ \/]?(\S+)/.exec(a)}();J&&(I=J?J[1]:"");if(D){var K=G();if(null!=K&&K>parseFloat(I)){H=String(K);break a}}H=I}var L={};
function M(a){var b;if(!(b=L[a])){b=0;for(var c=k(String(H)).split("."),d=k(String(a)).split("."),q=Math.max(c.length,d.length),l=0;0==b&&l<q;l++){var ca=c[l]||"",da=d[l]||"",ea=RegExp("(\\d*)(\\D*)","g"),fa=RegExp("(\\d*)(\\D*)","g");do{var t=ea.exec(ca)||["","",""],u=fa.exec(da)||["","",""];if(0==t[0].length&&0==u[0].length)break;b=m(0==t[1].length?0:parseInt(t[1],10),0==u[1].length?0:parseInt(u[1],10))||m(0==t[2].length,0==u[2].length)||m(t[2],u[2])}while(0==b)}b=L[a]=0<=b}return b}
var N=e.document,ga=N&&D?G()||("CSS1Compat"==N.compatMode?parseInt(H,10):5):void 0;D&&M("9");!F||M("528");E&&M("1.9b")||D&&M("8")||C&&M("9.5")||F&&M("528");E&&!M("8")||D&&M("9");!E&&!D||D&&9<=Number(ga)||E&&M("1.9.1");D&&M("9");function O(a){this.b=a;this.a=document.createElement("BUTTON");this.a.setAttribute("class","button");this.a.innerHTML=this.b}function P(a,b){a.a.onclick=b};function Q(a,b,c){if("string"==typeof b)(b=R(a,b))&&(a.style[b]=c);else for(var d in b){c=a;var q=b[d],l=R(c,d);l&&(c.style[l]=q)}}var S={};function R(a,b){var c=S[b];if(!c){var d=n(b),c=d;void 0===a.style[d]&&(d=(F?"Webkit":E?"Moz":D?"ms":C?"O":null)+p(d),void 0!==a.style[d]&&(c=d));S[b]=c}return c};function ha(){this.b=document.createElement("DIV");this.b.setAttribute("id","toolbar");this.a=[]}function T(a,b){a.a.push(b);a.b.appendChild(b.a)};function ia(a,b){this.b=b;this.a=a}function ja(a){var b=document.createElement("DIV");b.setAttribute("class","capture");Q(b,"top",a.a.top+"px");Q(b,"left",a.a.left+"px");var c=document.createElement("IMG");c.setAttribute("src",a.b);c.setAttribute("alt","\u0442\u0435\u043a\u0441\u0442");Q(c,"width",a.a.width+"px");Q(c,"height",a.a.height+"px");b.appendChild(c);return b};function ka(){var a=document.createDocumentFragment();a.appendChild(la(this));a.appendChild(ma(this));a.appendChild(na(this));a.appendChild(oa(this));document.body.appendChild(a);this.g=[]}function U(a,b,c){b=new ia(b,c);a.f.appendChild(ja(b));a.g.push(b)}
function ma(a){a.b=document.createElement("INPUT");a.b.id="imageInput";a.b.type="text";a.b.setAttribute("value","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 Url \u0438\u043b\u0438 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438");return a.b}function na(a){a.c=document.createElement("INPUT");a.c.type="file";Q(a.c,"display","none");return a.c}
function la(a){a.a=new ha;T(a.a,new O("Undo"));T(a.a,new O("Redo"));T(a.a,new O("Add image"));return a.a.b}function oa(a){a.f=document.createElement("DIV");a.f.id="canvas";return a.f};function V(a){this.b=a;this.a=new ka;pa(this)}V.prototype.f=function(a){a=a.target;var b=new FileReader;b.onload=h(function(){var a=b.result.toString(),d=y(this.b);U(this.a,d,a)},this);b.readAsDataURL(a.files[0])};function pa(a){var b=a.a.a;P(b.a[0],function(){console.log("undo")});P(b.a[1],function(){console.log("redo")});P(b.a[2],h(a.c,a));h(a.f,a)}V.prototype.c=function(){var a=this.a.b.value;if(a){var b=y(this.b);U(this.a,b,a)}else this.a.c.click()};function W(){new V(new aa)}var X=["Sample","start"],Y=e;X[0]in Y||!Y.execScript||Y.execScript("var "+X[0]);for(var Z;X.length&&(Z=X.shift());)X.length||void 0===W?Y[Z]?Y=Y[Z]:Y=Y[Z]={}:Y[Z]=W;})();
